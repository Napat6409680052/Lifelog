<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Lifelogging Usability Test</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />
  <script src="script.js" defer></script>
</head>

<body>
  <div class="container">

    <h1>Lifelogging Usability Test</h1>

    <label for="pid">Participant ID :</label>
    <input id="pid" type="text" placeholder="р╣Ар╕Кр╣Ир╕Щ 01" />

    <p><strong>р╣Ар╕ер╕╖р╕нр╕Бр╕Кр╕╕р╕Фр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ (1тАУ4) :</strong></p>
    <select id="latinOrder">
      <option value="1">1 </option>
      <option value="2">2 </option>
      <option value="3">3 </option>
      <option value="4">4 </option>
    </select>

    <h3>Test Signals (р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Ыр╕┤р╕Фр╕гр╕░р╕Ър╕Ър╣Ар╕кр╕╡р╕вр╕Зр╣Бр╕ер╕░р╕гр╕░р╕Ър╕Ър╕кр╕▒р╣Ир╕Щ)</h3>
    <div class="row">
      <button onclick="testBeep()" class="soundBtn">ЁЯФК Beep Sound</button>
      <button onclick="testVibrate()" class="vibBtn">ЁЯУ│ Test Vibrate</button>
    </div>

    <p class="note">
      тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕ : р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╣Ар╕кр╕╡р╕вр╕Зр╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╕кр╕▒р╣Ир╕Щ<br />
      тЖТ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╖р╕нр╕Цр╕╖р╕нр╣Др╕бр╣Ир╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Вр╕лр╕бр╕Фр╣Ар╕Зр╕╡р╕вр╕Ъ (Silent)<br />
      тЖТ р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Bluetooth р╕лр╕╣р╕Яр╕▒р╕З р╕лр╕гр╕╖р╕нр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣Мр╣Ар╕кр╕╡р╕вр╕Зр╕нр╕╖р╣Ир╕Щ<br />
      тЖТ р╣Ар╕Ыр╕┤р╕Фр╕гр╕░р╕Фр╕▒р╕Ър╣Ар╕кр╕╡р╕вр╕З Media Volume р╣Гр╕лр╣Йр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕Др╣Ир╕▓р╕Бр╕ер╕▓р╕Зр╕лр╕гр╕╖р╕нр╕кр╕╣р╕Зр╕кр╕╕р╕Ф
    </p>

    <h3>Instructions (р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│)</h3>
    <div class="instructions">

      <p><strong>Scenario 1 тАУ Awareness Test</strong></p>
      <ol>
        <li>
          р╣Гр╕лр╣Йр╕бр╕нр╕Зр╕Ир╕╕р╕Ф Focus <span class="fix">( + )</span> р╕Чр╕╡р╣Ир╕Бр╕ер╕▓р╕Зр╕лр╕Щр╣Йр╕▓р╕Ир╕н<br />
          (р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Др╕зр╕▓р╕бр╕Юр╕гр╣Йр╕нр╕бр╕гр╕нр╕кр╕┤р╣Ир╕Зр╣Ар╕гр╣Йр╕▓)
        </li>
        <li>
          р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡р╕кр╕┤р╣Ир╕Зр╣Ар╕гр╣Йр╕▓ (р╣Др╕Я / р╣Ар╕кр╕╡р╕вр╕З / р╕кр╕▒р╣Ир╕Щ) <br />
          тЖТ р╣Гр╕лр╣Йр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б <button class="openBtn">Open(р╣Ар╕Ыр╕┤р╕Ф)</button> р╣Гр╕лр╣Йр╣Ар╕гр╣Зр╕зр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф
        </li>
      </ol>

      <p class="note2">
        тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕ : р╕лр╕▓р╕Бр╣Др╕бр╣Ир╕бр╕╡р╕кр╕┤р╣Ир╕Зр╣Ар╕гр╣Йр╕▓р╣Гр╕Ф р╣Ж р╕Ыр╕гр╕▓р╕Бр╕Пр╕Вр╕╢р╣Йр╕Щ<br />
        р╣Гр╕лр╣Йр╕Др╕Зр╣Вр╕Яр╕Бр╕▒р╕кр╣Др╕зр╣Йр╕Чр╕╡р╣Ир╕Ир╕╕р╕Ф Focus (р╕лр╣Йр╕▓р╕бр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б) р╕Ир╕Щр╕Ир╕Ър╕кр╕┤р╣Ир╕Зр╣Ар╕гр╣Йр╕▓р╕Щр╕▒р╣Йр╕Щ
      </p>

      <p class="note2">
        р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╕╕р╣Ир╕бр╣Бр╕кр╕Фр╕Зр╕кр╕┤р╣Ир╕Зр╣Ар╕гр╣Йр╕▓ 4 р╣Бр╕Ър╕Ъ р╕Др╕╖р╕н <strong>LED / Beep / Vibrate / None</strong><br />
        р╣Бр╕Хр╣Ир╕ер╕░р╣Бр╕Ър╕Ър╕Ир╕░р╕Ыр╕гр╕▓р╕Бр╕П 20 р╕Др╕гр╕▒р╣Йр╕З (р╕гр╕зр╕б 80 trials р╕Хр╣Ир╕нр╕Ьр╕╣р╣Йр╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕б 1 р╕Др╕Щ)
      </p>
    </div>

    <button id="startBtn" class="primary">тЦ╢ Start Scenario 1</button>

  </div>
   <script>
    // р╕Фр╕╢р╕Зр╕Др╣Ир╕▓р╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Бр╕Ир╕▓р╕Бр╕лр╕Щр╣Йр╕▓ home
    const pid = localStorage.getItem('pid') || ('soundtest-' + Date.now());
    const order = localStorage.getItem('order') || '1';

    // === Latin Square Mapping ===
    // р╣Ар╕Кр╣Ир╕Щ order 1тАУ4 р╕Ир╕░р╕кр╕ер╕▒р╕Ър╕ер╕│р╕Фр╕▒р╕Ъ condition 4 р╣Бр╕Ър╕Ъ
    const latinOrders = {
      '1': ['LED', 'Beep', 'Vibrate', 'None'],
      '2': ['Beep', 'Vibrate', 'None', 'LED'],
      '3': ['Vibrate', 'None', 'LED', 'Beep'],
      '4': ['None', 'LED', 'Beep', 'Vibrate']
    };

    // р╕Фр╕╢р╕Зр╕ер╕│р╕Фр╕▒р╕Ър╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Бр╣Др╕зр╣Й
    const selectedOrder = latinOrders[order] || latinOrders['1'];
    console.log('Latin order:', selectedOrder);

    // р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ condition р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╣Гр╕лр╣Йр╣Ар╕Ыр╣Зр╕Щ "Beep" (р╣Ар╕Йр╕Юр╕▓р╕░р╕лр╕Щр╣Йр╕▓р╕Щр╕╡р╣Й)
    window.condition = 'Beep';
    localStorage.setItem('pid', pid);
    localStorage.setItem('order', order);

    // р╣Бр╕кр╕Фр╕Зр╕Кр╕╖р╣Ир╕н condition р╕Ър╕Щр╕лр╕Щр╣Йр╕▓р╕Ир╕н
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('condLabel').textContent = `Condition: ${condition} (р╕Кр╕╕р╕Ф ${order})`;
      if (typeof runTrial === 'function') runTrial();
    });
  </script>
</body>
</html>
